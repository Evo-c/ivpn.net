---
title: App-based VPN using SOCKS5
url: /blog/socks5-proxies-app-based-vpn-tunnels/
highlighted: false
draft: false
authors:
  - Nick Pestell
categories:
  - Under the Hood	
tags:
  - Apps
date: 2022-07-13T11:12:00.000Z
thumbnailImage: /images-static/uploads/silicon_thumb.png
---

Today we're launching our new SOCKS5 proxy service, available on all IVPN servers. This enables multiple new features but I feel the most exciting is the ability to configure individual apps (or browser tabs!) to route their traffic through a different VPN server than the one you are connected to. For example, you could connect to the Paris VPN server using the IVPN app but configure your web browser to exit the Singapore VPN server. All the traffic generated by apps on your device will by default exit the Paris server except for traffic from the web browser which will exit the Singapore VPN server. This feature can be supercharged for Firefox customers by installing the "Firefox Multi-account Containers" addon which enables you to configure a different SOCKS5 proxy for each browser tab. See the section below including a video demo. 

Secondly, with the SOCKS5 service you can implement an application kill-switch so traffic from the application would be unrouteable if the VPN connection is terminated. The IVPN app firewall already prevents any traffic leaking outside of the VPN connection however you may want an additional killswitch if you need to disable the IVPN firewall to access local or remote resources or perhaps you just feel more comfortable having multiple anti-leak controls. This works because our SOCKS5 proxies are only available when the VPN is connected, so if the VPN is disconnected, the proxy is not available and no traffic can leak from the application.

For more information on how to configure SOCKS5 please refer to our <a href="/knowledgebase/general/socks5-proxy-service/">SOCKS5 Knowledgebase article</a>.

## Firefox Multi-Account Containers

Besides being able to configure containers with their own VPN server, you can associate specific websites with a container and anytime you open the website it will open in the associated container and all traffic will be routed through the associated VPN server. So for example you can create a container to route traffic through the London, UK server and associate the BBC news website with that container. Anytime you visit this website Firefox will launch it in the associated container and the connection will be routed through the London, UK server without you having to do anything. Note that you need to be connected to the VPN first for this to work.

{{< video src="/images-static/uploads/firefox-multi-account-containers-ivpn-demo-blog-50.mp4" type="video/mp4" preload="auto" >}}

## Some technical details

Each VPN server has a SOCKS5 proxy listening on port 1080. Once you are connected to any VPN server using Wireguard / OpenVPN / IPSec you can configure your application to use the SOCKS proxy on any server in our network (including the one you are connected to). Every server in our network is interconnected using a Wireguard mesh. If you connect to Amsterdam using OpenVPN and then proxy your Firefox traffic to the Kyiv server then your Firefox traffic is encrypted to the Amsterdam server using the OpenVPN tunnel and then re-encrypted for the Kyiv server via the WireGuard server->server tunnel where it will exit to its final destination.

**Warning**

Although this appears to be a multihop connection, it doesn't offer the same security properties as the multihop service available from within the apps. When using multihop via the IVPN apps your data is encrypted for the exit server so an attacker with access to the entry server would only see the encrypted data. When multi-hoping with the SOCKS5 proxy an attacker with access to the entry server could see your unencrypted traffic after it has been decrypted by the OpenVPN tunnel and before encerypting for the Wireguard tunnel. Most traffic nowadays is however encrypted at layer 5+ e.g. SSL/TLS which partially mitigates this risk. For customers with a threat model that requires a fully end-end encrypted tunnel (device to exit server) we recommend establishing a multi-hop connection from within the app. If you wish to connect an application or browser tab to a SOCKS5 server you can still do so in which case it would be a triple hop connection.